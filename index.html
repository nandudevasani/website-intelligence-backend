<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Website Intelligence Tool</title>
<style>
body { font-family: sans-serif; margin:20px; }
input, button { padding: 6px 12px; margin: 4px; }
table { border-collapse: collapse; width: 100%; margin-top: 16px; }
th, td { border: 1px solid #aaa; padding: 6px; text-align: left; font-size: 13px; }
th { background: #f0f0f0; }
a { color: #2563eb; text-decoration: none; }
</style>
</head>
<body>
<h2>Website Intelligence Tool</h2>
<textarea id="domains" placeholder="Enter domains, one per line" rows="6" cols="60"></textarea><br>
<button onclick="scanBulk()">Scan Websites</button>

<table id="resultsTable" style="display:none;">
  <thead>
    <tr>
      <th>Domain</th>
      <th>Status</th>
      <th>Reason</th>
      <th>Business Name</th>
      <th>Street</th>
      <th>City</th>
      <th>State</th>
      <th>Zip</th>
      <th>Phone</th>
      <th>Email</th>
      <th>Facebook</th>
      <th>Instagram</th>
      <th>LinkedIn</th>
      <th>GMB</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function scanBulk() {
  const text = document.getElementById("domains").value;
  const domains = text.split("\n").map(d=>d.trim()).filter(Boolean);
  if(domains.length === 0) { alert("Enter domains!"); return; }

  const table = document.getElementById("resultsTable");
  const tbody = table.querySelector("tbody");
  tbody.innerHTML = "";
  table.style.display = "table";

  try {
    const res = await fetch("https://YOUR_BACKEND_URL/bulk-analyze", {
      method: "POST",
      headers: { "Content-Type":"application/json" },
      body: JSON.stringify({ domains })
    });
    const data = await res.json();

    data.forEach(r => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${r.domain}</td>
        <td>${r.status}</td>
        <td>${r.reason || ""}</td>
        <td>${r.name || ""}</td>
        <td>${r.street || ""}</td>
        <td>${r.city || ""}</td>
        <td>${r.state || ""}</td>
        <td>${r.zip || ""}</td>
        <td>${r.phone || ""}</td>
        <td>${r.email || ""}</td>
        <td>${r.social.facebook ? `<a href="${r.social.facebook}" target="_blank">Facebook</a>` : ""}</td>
        <td>${r.social.instagram ? `<a href="${r.social.instagram}" target="_blank">Instagram</a>` : ""}</td>
        <td>${r.social.linkedin ? `<a href="${r.social.linkedin}" target="_blank">LinkedIn</a>` : ""}</td>
        <td>${r.social.gmb ? `<a href="${r.social.gmb}" target="_blank">GMB</a>` : ""}</td>
      `;
      tbody.appendChild(tr);
    });
  } catch(e) {
    alert("Error fetching data");
  }
}
</script>
</body>
</html>
